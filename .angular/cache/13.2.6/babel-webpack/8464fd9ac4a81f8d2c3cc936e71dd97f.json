{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { COMMA, ENTER } from '@angular/cdk/keycodes';\nimport { map, startWith } from 'rxjs/operators';\nimport * as moment from 'moment';\nimport { toBase64 } from 'src/app/utilidades';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../imagen-perfil/imagen-perfil.component\";\nimport * as i3 from \"@angular/material/form-field\";\nimport * as i4 from \"@angular/material/input\";\nimport * as i5 from \"@angular/material/chips\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/autocomplete\";\nimport * as i9 from \"@angular/material/core\";\nimport * as i10 from \"@angular/material/datepicker\";\nimport * as i11 from \"ngx-mask\";\nimport * as i12 from \"@angular/material/button\";\nconst _c0 = [\"hobieInput\"];\n\nfunction FormularioPerfilComponent_mat_chip_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-chip\", 26);\n    i0.ɵɵlistener(\"removed\", function FormularioPerfilComponent_mat_chip_29_Template_mat_chip_removed_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const hobie_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.remove(hobie_r6);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 27)(3, \"mat-icon\");\n    i0.ɵɵtext(4, \"cancel\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const hobie_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", hobie_r6, \" \");\n  }\n}\n\nfunction FormularioPerfilComponent_mat_option_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const hobie_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", hobie_r9);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", hobie_r9, \" \");\n  }\n}\n\nexport let FormularioPerfilComponent = /*#__PURE__*/(() => {\n  class FormularioPerfilComponent {\n    constructor(formBuilder) {\n      this.formBuilder = formBuilder;\n      this.onSubmit = new EventEmitter();\n      this.mayor18 = false;\n      this.separatorKeysCodes = [ENTER, COMMA];\n      this.hobieCtrl = new FormControl();\n      this.hobies = [];\n      this.allhobies = ['Jugar Futboll', 'Jugar Basketboll', 'Jugar Tennis', 'Jugar Voleibal', 'Jugar Fifa', 'Jugar Videojuegos'];\n      const currentYear = new Date().getFullYear();\n      this.minDate = new Date(currentYear - 18, 0, 1);\n      this.maxDate = new Date(currentYear + 1, 11, 31);\n    }\n\n    ngOnInit() {\n      this.filteredhobies = this.hobieCtrl.valueChanges.pipe(startWith(null), map(hobie => hobie ? this._filter(hobie) : this.allhobies.slice()));\n      this.form = new FormGroup({\n        nombre: new FormControl('', {\n          validators: [Validators.required]\n        }),\n        pasatiempo: new FormControl(''),\n        cumpleanios: new FormControl('', {\n          validators: [Validators.required]\n        }),\n        documento: new FormControl(''),\n        foto: new FormControl(''),\n        fotoBase64: new FormControl(''),\n        edad: new FormControl('')\n      });\n\n      if (this.usuario_Perfil != undefined) {\n        this.form.patchValue(this.usuario_Perfil);\n      }\n    }\n\n    setMayor18() {\n      let fechaCumple = moment(this.form.get(\"cumpleanios\").value);\n      let fechaActual = moment();\n      let years = fechaActual.diff(fechaCumple, 'years');\n\n      if (years >= 18) {\n        this.mayor18 = true;\n      } else {\n        this.mayor18 = false;\n      }\n\n      this.form.get(\"edad\").setValue(years);\n    }\n\n    add(event) {\n      const value = (event.value || '').trim();\n\n      if (value) {\n        this.hobies.push(value);\n      }\n\n      event.chipInput.clear();\n      this.hobieCtrl.setValue(null);\n    }\n\n    remove(hobie) {\n      const index = this.hobies.indexOf(hobie);\n\n      if (index >= 0) {\n        this.hobies.splice(index, 1);\n      }\n    }\n\n    selected(event) {\n      this.hobies.push(event.option.viewValue);\n      this.hobieInput.nativeElement.value = '';\n      this.hobieCtrl.setValue(null);\n    }\n\n    _filter(value) {\n      const filterValue = value.toLowerCase();\n      return this.allhobies.filter(hobie => hobie.toLowerCase().includes(filterValue));\n    }\n\n    archivoSeleccionado(file) {\n      this.form.get(\"foto\").setValue(file);\n      let imgBase64;\n      toBase64(file).then(value => imgBase64 = value).catch(error => console.log(error));\n      this.form.get(\"fotoBase64\").setValue(imgBase64);\n    }\n\n    Guardar() {\n      let pasatiempos = this.hobies.map(valor => valor);\n      this.form.get(\"pasatiempo\").setValue(pasatiempos);\n      this.onSubmit.emit(this.form.value);\n    }\n\n  }\n\n  FormularioPerfilComponent.ɵfac = function FormularioPerfilComponent_Factory(t) {\n    return new (t || FormularioPerfilComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n  };\n\n  FormularioPerfilComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FormularioPerfilComponent,\n    selectors: [[\"app-formulario-perfil\"]],\n    viewQuery: function FormularioPerfilComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.hobieInput = _t.first);\n      }\n    },\n    inputs: {\n      usuario_Perfil: \"usuario_Perfil\"\n    },\n    outputs: {\n      onSubmit: \"onSubmit\"\n    },\n    decls: 54,\n    vars: 13,\n    consts: [[1, \"box\"], [1, \"msgPerfil\"], [1, \"msgTitulo1\"], [1, \"msgTitulo2\"], [3, \"formGroup\", \"submit\"], [1, \"cajaPerfil\"], [1, \"imgPerfil\"], [3, \"archivoSeleccionado\"], [1, \"infoPerfil\"], [\"appearance\", \"outline\"], [\"formControlName\", \"nombre\", \"matInput\", \"\"], [\"appearance\", \"outline\", 1, \"example-chip-list\"], [\"aria-label\", \"Seleccione pasatiempo\"], [\"chipList\", \"\"], [3, \"removed\", 4, \"ngFor\", \"ngForOf\"], [\"placeholder\", \"Nuevo pasatiempo...\", 3, \"formControl\", \"matAutocomplete\", \"matChipInputFor\", \"matChipInputSeparatorKeyCodes\", \"matChipInputTokenEnd\"], [\"hobieInput\", \"\"], [3, \"optionSelected\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"cumpleanios\", \"matInput\", \"\", 3, \"matDatepicker\", \"dateChange\"], [\"matSuffix\", \"\", 3, \"for\"], [\"dpicker\", \"\"], [\"formControlName\", \"documento\", \"matInput\", \"\", \"mask\", \"00000000-0\", 3, \"required\"], [1, \"footerPerfil\"], [\"mat-flat-button\", \"\", \"color\", \"primary\", 3, \"disabled\"], [3, \"removed\"], [\"matChipRemove\", \"\"], [3, \"value\"]],\n    template: function FormularioPerfilComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵtext(3, \"Hola! Configuraremos tu perfil\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵtext(5, \"Queremos conocerte mejor\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"form\", 4);\n        i0.ɵɵlistener(\"submit\", function FormularioPerfilComponent_Template_form_submit_6_listener() {\n          return ctx.Guardar();\n        });\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"app-imagen-perfil\", 7);\n        i0.ɵɵlistener(\"archivoSeleccionado\", function FormularioPerfilComponent_Template_app_imagen_perfil_archivoSeleccionado_9_listener($event) {\n          return ctx.archivoSeleccionado($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"div\", 8)(11, \"div\")(12, \"div\")(13, \"h2\");\n        i0.ɵɵtext(14, \"Tu Informaci\\u00F3n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"h5\");\n        i0.ɵɵtext(16, \"Completa la siguiente informaci\\u00F3n parar completar tu perfil\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(17, \"div\")(18, \"mat-form-field\", 9)(19, \"mat-label\");\n        i0.ɵɵtext(20, \"Nombre\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"input\", 10);\n        i0.ɵɵelementStart(22, \"mat-error\");\n        i0.ɵɵtext(23, \"El campo es requerido\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(24, \"mat-form-field\", 11)(25, \"mat-label\");\n        i0.ɵɵtext(26, \"Pasatiempos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"mat-chip-list\", 12, 13);\n        i0.ɵɵtemplate(29, FormularioPerfilComponent_mat_chip_29_Template, 5, 1, \"mat-chip\", 14);\n        i0.ɵɵelementStart(30, \"input\", 15, 16);\n        i0.ɵɵlistener(\"matChipInputTokenEnd\", function FormularioPerfilComponent_Template_input_matChipInputTokenEnd_30_listener($event) {\n          return ctx.add($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(32, \"mat-autocomplete\", 17, 18);\n        i0.ɵɵlistener(\"optionSelected\", function FormularioPerfilComponent_Template_mat_autocomplete_optionSelected_32_listener($event) {\n          return ctx.selected($event);\n        });\n        i0.ɵɵtemplate(34, FormularioPerfilComponent_mat_option_34_Template, 2, 2, \"mat-option\", 19);\n        i0.ɵɵpipe(35, \"async\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(36, \"mat-form-field\", 9)(37, \"mat-label\");\n        i0.ɵɵtext(38, \"Cumplea\\u00F1os\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"input\", 20);\n        i0.ɵɵlistener(\"dateChange\", function FormularioPerfilComponent_Template_input_dateChange_39_listener() {\n          return ctx.setMayor18();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(40, \"mat-datepicker-toggle\", 21)(41, \"mat-datepicker\", null, 22);\n        i0.ɵɵelementStart(43, \"mat-error\");\n        i0.ɵɵtext(44, \"El campo es requerido\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(45, \"mat-form-field\", 9)(46, \"mat-label\");\n        i0.ɵɵtext(47, \"Documento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(48, \"input\", 23);\n        i0.ɵɵelementStart(49, \"mat-error\");\n        i0.ɵɵtext(50, \"El campo es requerido\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(51, \"div\", 24)(52, \"button\", 25);\n        i0.ɵɵtext(53, \"Continuar\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(28);\n\n        const _r3 = i0.ɵɵreference(33);\n\n        const _r5 = i0.ɵɵreference(42);\n\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(23);\n        i0.ɵɵproperty(\"ngForOf\", ctx.hobies);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formControl\", ctx.hobieCtrl)(\"matAutocomplete\", _r3)(\"matChipInputFor\", _r0)(\"matChipInputSeparatorKeyCodes\", ctx.separatorKeysCodes);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(35, 11, ctx.filteredhobies));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"matDatepicker\", _r5);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"for\", _r5);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"required\", ctx.mayor18);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"disabled\", ctx.form.invalid);\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i2.ImagenPerfilComponent, i3.MatFormField, i3.MatLabel, i1.DefaultValueAccessor, i4.MatInput, i1.NgControlStatus, i1.FormControlName, i3.MatError, i5.MatChipList, i6.NgForOf, i5.MatChip, i5.MatChipRemove, i7.MatIcon, i8.MatAutocompleteTrigger, i5.MatChipInput, i1.FormControlDirective, i8.MatAutocomplete, i9.MatOption, i10.MatDatepickerInput, i10.MatDatepickerToggle, i3.MatSuffix, i10.MatDatepicker, i11.MaskDirective, i1.RequiredValidator, i12.MatButton],\n    pipes: [i6.AsyncPipe],\n    styles: [\"mat-form-field[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{margin-right:1rem}.box[_ngcontent-%COMP%]{max-width:60%;min-width:700px}.msgPerfil[_ngcontent-%COMP%]{padding-top:50px;padding-left:50px}.imgPerfil[_ngcontent-%COMP%]{display:flex;width:50%;height:600px;align-content:center;align-items:center;justify-content:center}.infoPerfil[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:50%;align-content:center;justify-content:center}.infoPerfil[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#00f;font-weight:lighter}.infoPerfil[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:gray;font-weight:lighter}.cajaPerfil[_ngcontent-%COMP%]{display:flex}.footerPerfil[_ngcontent-%COMP%]{align-content:center}.msgTitulo1[_ngcontent-%COMP%]{color:#00008b;font-size:23px;font-weight:700}.msgTitulo2[_ngcontent-%COMP%]{padding-top:15px;color:gray;font-size:13px}\"]\n  });\n  return FormularioPerfilComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}